{"version":3,"file":"js/custom/layout-builder/layout-builder.js","mappings":";;;;;;AAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;;AAEA,yBAAyB;AACzB,MAAM;AACN,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,OAAO;AACP;AACA;;AAEA;AACA,OAAO;AACP,MAAM;AACN,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA,KAAK;AACL,IAAI;AACJ,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,MAAM;AACN,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL,IAAI;AACJ,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC,E","sources":["webpack://team1676-apps/./app/views/js/custom/layout-builder/layout-builder.js"],"sourcesContent":["\"use strict\";\n\n// Class definition\nvar KTLayoutBuilder = function() {\n\tvar form = document.querySelector(\"#kt_layout_builder_form\");\n\tvar actionInput = document.querySelector(\"#kt_layout_builder_action\");\n\tvar tabInput = document.querySelector(\"#kt_layout_builder_tab\");\t\n\tvar url = form.getAttribute(\"action\");\n\n\tvar previewButton = document.querySelector(\"#kt_layout_builder_preview\");\n\tvar exportButton = document.querySelector(\"#kt_layout_builder_export\");\n\tvar resetButton = document.querySelector(\"#kt_layout_builder_reset\");\n\n\tvar handleTab = function() {\n\t\tvar tabs = [].slice.call(document.querySelectorAll('#kt_layout_builder_tabs a[data-bs-toggle=\"tab\"]'));\n\n\t\ttabs.forEach(function (tab) {\n\t\t\ttab.addEventListener(\"shown.bs.tab\", function (e) {\n\t\t\t\ttabInput.value = tab.getAttribute(\"href\").substring(1);\n\t\t\t});\n\t\t});\n\t};\n\n\tvar handlePreview = function() {\n\t\tpreviewButton.addEventListener(\"click\", function(e) {\n\t\t\te.preventDefault();\n\n\t\t\t// Set form action value\n\t\t\tactionInput.value = \"preview\";\n\n\t\t\t// Show progress\n\t\t\tpreviewButton.setAttribute(\"data-kt-indicator\", \"on\");\n\n\t\t\t// Prepare form data\n\t\t\tvar data = $(form).serialize();\n\n\t\t\t// Submit\n\t\t\t$.ajax({\n\t\t\t\ttype: \"POST\",\n\t\t\t\tdataType: \"html\",\n\t\t\t\turl: url,\n\t\t\t\tdata: data,\n\t\t\t\tsuccess: function(response, status, xhr) {\n\t\t\t\t\ttoastr.success(\n\t\t\t\t\t\t\"Preview has been updated with current configured layout.\", \n\t\t\t\t\t\t\"Preview updated!\", \n\t\t\t\t\t\t{timeOut: 0, extendedTimeOut: 0, closeButton: true, closeDuration: 0}\n\t\t\t\t\t);\n\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tif (history.scrollRestoration) {\n\t\t\t\t\t\t\thistory.scrollRestoration = 'manual';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlocation.reload(); // reload page\n\t\t\t\t\t}, 1500);\n\t\t\t\t},\n\t\t\t\terror: function(response) {\n\t\t\t\t\ttoastr.error(\n\t\t\t\t\t\t\"Please try it again later.\", \n\t\t\t\t\t\t\"Something went wrong!\", \n\t\t\t\t\t\t{timeOut: 0, extendedTimeOut: 0, closeButton: true, closeDuration: 0}\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tcomplete: function() {\n\t\t\t\t\tpreviewButton.removeAttribute(\"data-kt-indicator\");\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t};\n\n\tvar handleExport = function() {\n\t\texportButton.addEventListener(\"click\", function(e) {\n\t\t\te.preventDefault();\n\n\t\t\ttoastr.success(\n\t\t\t\t\"Process has been started and it may take a while.\", \n\t\t\t\t\"Generating HTML!\", \n\t\t\t\t{timeOut: 0, extendedTimeOut: 0, closeButton: true, closeDuration: 0}\n\t\t\t);\n\n\t\t\t// Show progress\n\t\t\texportButton.setAttribute(\"data-kt-indicator\", \"on\");\n\n\t\t\t// Set form action value\n\t\t\tactionInput.value = \"export\";\n\t\t\t\n\t\t\t// Prepare form data\n\t\t\tvar data = $(form).serialize();\n\n\t\t\t$.ajax({\n\t\t\t\ttype: \"POST\",\n\t\t\t\tdataType: \"html\",\n\t\t\t\turl: url,\n\t\t\t\tdata: data,\n\t\t\t\tsuccess: function(response, status, xhr) {\n\t\t\t\t\tvar timer = setInterval(function() {\n\t\t\t\t\t\t$(\"<iframe/>\").attr({\n\t\t\t\t\t\t\tsrc: url + \"?layout-builder[action]=export&download=1&output=\" + response,\n\t\t\t\t\t\t\tstyle: \"visibility:hidden;display:none\",\n\t\t\t\t\t\t}).ready(function() {\n\t\t\t\t\t\t\t// Stop the timer\n\t\t\t\t\t\t\tclearInterval(timer);\n\n\t\t\t\t\t\t\texportButton.removeAttribute(\"data-kt-indicator\");\n\t\t\t\t\t\t}).appendTo(\"body\");\n\t\t\t\t\t}, 3000);\n\t\t\t\t},\n\t\t\t\terror: function(response) {\n\t\t\t\t\ttoastr.error(\n\t\t\t\t\t\t\"Please try it again later.\", \n\t\t\t\t\t\t\"Something went wrong!\", \n\t\t\t\t\t\t{timeOut: 0, extendedTimeOut: 0, closeButton: true, closeDuration: 0}\n\t\t\t\t\t);\n\n\t\t\t\t\texportButton.removeAttribute(\"data-kt-indicator\");\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t};\n\n\tvar handleReset = function() {\n\t\tresetButton.addEventListener(\"click\", function(e) {\n\t\t\te.preventDefault();\n\n\t\t\t// Show progress\n\t\t\tresetButton.setAttribute(\"data-kt-indicator\", \"on\");\n\n\t\t\t// Set form action value\n\t\t\tactionInput.value = \"reset\";\n\t\t\t\n\t\t\t// Prepare form data\n\t\t\tvar data = $(form).serialize();\n\n\t\t\t$.ajax({\n\t\t\t\ttype: \"POST\",\n\t\t\t\tdataType: \"html\",\n\t\t\t\turl: url,\n\t\t\t\tdata: data,\n\t\t\t\tsuccess: function(response, status, xhr) {\n\t\t\t\t\ttoastr.success(\n\t\t\t\t\t\t\"Preview has been successfully reset and the page will be reloaded.\", \n\t\t\t\t\t\t\"Reset Preview!\", \n\t\t\t\t\t\t{timeOut: 0, extendedTimeOut: 0, closeButton: true, closeDuration: 0}\n\t\t\t\t\t);\n\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tif (history.scrollRestoration) {\n\t\t\t\t\t\t\thistory.scrollRestoration = 'manual';\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tlocation.reload(); // reload page\n\t\t\t\t\t}, 1500);\n\t\t\t\t},\n\t\t\t\terror: function(response) {\n\t\t\t\t\ttoastr.error(\n\t\t\t\t\t\t\"Please try it again later.\", \n\t\t\t\t\t\t\"Something went wrong!\", \n\t\t\t\t\t\t{timeOut: 0, extendedTimeOut: 0, closeButton: true, closeDuration: 0}\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tcomplete: function() {\n\t\t\t\t\tresetButton.removeAttribute(\"data-kt-indicator\");\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t};\n\n\tvar handleThemeMode = function() {\n\t\tvar checkLight = document.querySelector('#kt_layout_builder_theme_mode_light');\n\t\tvar checkDark = document.querySelector('#kt_layout_builder_theme_mode_dark');\n\t\tvar check = document.querySelector('#kt_layout_builder_theme_mode_' + KTThemeMode.getMode());\n\n\t\tif (checkLight) {\n\t\t\tcheckLight.addEventListener(\"click\", function() {\n\t\t\t\tthis.checked = true;\n\t\t\t\tthis.closest('[data-kt-buttons=\"true\"]').querySelector('.form-check-image.active').classList.remove('active');\n\t\t\t\tthis.closest('.form-check-image').classList.add('active');\n\t\t\t\tKTThemeMode.setMode('light');\n\t\t\t});\n\t\t}\n\t\t\n\t\tif (checkDark) {\n\t\t\tcheckDark.addEventListener(\"click\", function() {\n\t\t\t\tthis.checked = true;\n\t\t\t\tthis.closest('[data-kt-buttons=\"true\"]').querySelector('.form-check-image.active').classList.remove('active');\n\t\t\t\tthis.closest('.form-check-image').classList.add('active');\n\t\t\t\tKTThemeMode.setMode('dark');\n\t\t\t});\n\t\t}\n\n\t\tif ( check ) {\n\t\t\tcheck.closest('.form-check-image').classList.add('active');\n\t\t\tcheck.checked = true;\n\t\t}\n\t}\n\n\treturn {\n\t\t// Public functions\n\t\tinit: function() {\n\t\t\thandlePreview();\n\t\t\thandleExport();\n\t\t\thandleReset();\n\t\t\thandleTab();\n\t\t\thandleThemeMode();\n\t\t}\n\t};\n}();\n\n// On document ready\nKTUtil.onDOMContentLoaded(function() {\n    KTLayoutBuilder.init();\n});"],"names":[],"sourceRoot":""}